# Description: Library of PNG support functions with APNG support
# URL:         http://www.libpng.org/
# Depends on:  zlib

name=libpng
version=1.6.49
release=1
source="$name-$version.tar.gz::https://github.com/pnggroup/$name/archive/refs/tags/v$version.tar.gz
	$name-$version-apng.patch"

build() {
	# thanks for the patch to openmamba project:
	# https://src.openmamba.org/rpms/libpng/raw/branch/main/libpng-1.6.49-apng.patch
	patch -d $name-$version -Np1 -i $SRC/$name-$version-apng.patch

	mkdir build; cd build

	../$name-$version/configure              \
		--prefix=/usr                    \
		--enable-hardware-optimizations  \

	make V=1
	make DESTDIR=$PKG install
}
