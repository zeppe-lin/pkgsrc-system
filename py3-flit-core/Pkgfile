# Description: Simplified packaging of Python modules
# URL:         https://github.com/takluyver/flit
# Depends on:  py3-pip

name=py3-flit-core
version=3.9.0
release=1
source=https://github.com/takluyver/flit/archive/$version/flit-$version.tar.gz

build() {
	rm flit-$version/tests/test_sdist.py

	cd flit-$version/flit_core

	/usr/bin/python3 build_dists.py
	PIP_CONFIG_FILE=/dev/null /usr/bin/pip3 install  \
		--isolated                               \
		--root=$PKG                              \
		--ignore-installed                       \
		--no-deps dist/*.whl

	# remove junk
	rm -r $PKG/usr/lib/python*/site-packages/flit_core/tests/  \
	      $PKG/usr/lib/python*/site-packages/flit_core/vendor/README
}
