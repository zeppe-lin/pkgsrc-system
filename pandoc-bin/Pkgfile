# Description: Conversion between markup formats
# URL:         https://pandoc.org/
# Depends on:  cmark
# Optional:    texlive

name=pandoc-bin
version=3.8.3
release=1
source="https://github.com/jgm/pandoc/releases/download/$version/pandoc-$version-linux-amd64.tar.gz
	https://github.com/jgm/pandoc/archive/$version/pandoc-$version.tar.gz"

build() {
	cd pandoc-$version

	# Install binaries and shared data
	mkdir -p $PKG/usr/share/pandoc
	cp -R bin share $PKG/usr
	cp -R data $PKG/usr/share/pandoc

	# Prune README files
	find $PKG -iname '*README*' -delete

	# Keep only English translation
	find $PKG/usr/share/pandoc/data/translations \
		-not -type d -not -name en.yaml -exec rm -f {} +
}
